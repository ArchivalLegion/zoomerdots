#!/bin/sh
#
# VAAPI h264 and aac

ffmpeg -y \
-vaapi_device /dev/dri/renderD128 \
-thread_queue_size 2048 -probesize 32M -f pulse -sample_rate 44100 -i default \
-thread_queue_size 2048 -probesize 32M -f x11grab -s 2560x1080 -framerate 60 -i :0 \
-vf 'format=nv12,hwupload' \
-c:v h264_vaapi -rc_mode:v CBR -compression_level:v 0 -b:v 8000k  \
-c:a flac -compression_level:a 5 \
/run/media/prostagama/please-no/rec-s/screen1_recording_`date '+%m-%d-%Y_%H-%M-%S'`.mkv \
&> /run/media/prostagama/please-no/rec-s/screen1_recording_`date '+%m-%d-%Y_%H-%M-%S'`.log
